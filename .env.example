# ============================================================================
# Backend Environment Variables - EXAMPLE
# ============================================================================
# Copy this file to .env and fill in actual values
# NEVER commit .env file containing real credentials
# ============================================================================

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_DB_DOCKER_PORT=5431
POSTGRES_DB_DOCKER_PORT_DEFAULT=5432
DATABASE=postgresql
DIALECT=org.hibernate.dialect.PostgreSQLDialect
DATABASE_PASSWORD=your_secure_password_here
DATABASE_PROVIDER_USERNAME=medisecure_postgres
JDBC_DATABASE_URL=jdbc:postgresql://postgres:5432/medisecure-micro-authservice
DATABASE_NAME=medisecure-micro-authservice

# HikariCP Connection Pool Configuration
# Maximum pool size (production: 10-20 depending on load)
HIKARI_MAX_POOL_SIZE=10
# Minimum idle connections (should be same as max for consistent performance)
HIKARI_MIN_IDLE=2
# Connection timeout in milliseconds (20 seconds)
HIKARI_CONNECTION_TIMEOUT=20000
# Idle timeout in milliseconds (5 minutes)
HIKARI_IDLE_TIMEOUT=300000
# Max lifetime of a connection in milliseconds (30 minutes)
HIKARI_MAX_LIFETIME=1800000
# Leak detection threshold in milliseconds (1 minute, 0 disables)
HIKARI_LEAK_DETECTION=60000

# ============================================================================
# Auth Service Configuration
# ============================================================================
AUTH_SERVER_PORT=8082
AUTH_SERVER_HOSTNAME=auth-service
BASE_URL=http://localhost:8080
AUTH_SERVICE_PATH_PREFIX=/api/v1/auth/
COOKIE_DOMAIN=localhost
COOKIE_SAME_SITE=Strict
COOKIE_SECURE=false

# ⚠️ SECURITY: Set COOKIE_SECURE=true in production!

# Public endpoints (unprotected routes)
PUBLIC_ENDPOINTS=/api/v1/auth/login,/api/v1/auth/register,/api/v1/auth/health/**,/api/v1/auth/verify-email,/api/v1/auth/verify-phone,/api/v1/auth/reset-password/**,/api/v1/auth/confirm-reset/**,/oauth2/**,/api/v1/auth/users/verify/**,/login/oauth2/code/**,/api/v1/auth/oauth2/**

# ============================================================================
# Email Configuration
# ============================================================================
EMAIL_PASSWORD=your_email_app_password_here
EMAIL_USERNAME=your_email@example.com
EMAIL_VERIFICATION_PATTERN=%s/api/v1/auth/verify-email?token=%s
EMAIL_RATE_LIMIT_PER_HOUR=10
EMAIL_MAX_RETRY_ATTEMPTS=3
EMAIL_SMPT_STARTTLS_ENABLE=true
EMAIL_SMPT_STARTTLS_REQUIRED=true
EMAIL_SMPT_AUTH=true
EMAIL_SMPT_CONNECTION_TIMEOUT=5000
EMAIL_SMPT_TIMEOUT=5000
EMAIL_SMPT_WRITETIMEOUT=5000

SMTP_HOSTNAME=smtp.gmail.com
SMTP_PORT=587

# ============================================================================
# OAuth2 Configuration (Google)
# ============================================================================
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_SECRET_ID=your_google_client_secret
GOOGLE_SCOPES=profile,email
GOOGLE_REDIRECT_URL=/api/v1/auth/oauth2/callback/google
GOOLGE_AUTHORIZATION_URI=https://accounts.google.com/o/oauth2/v2/auth
GOOLGE_TOKEN_URI=https://oauth2.googleapis.com/token
GOOGLE_USERINFO_URI=https://www.googleapis.com/oauth2/v3/userinfo
GOOGLE_USER_NAME_ATTRIBUTE=sub

# ============================================================================
# Frontend URLs
# ============================================================================
FRONTEND_URL=http://localhost:5173

# ============================================================================
# Async Executor Configuration
# ============================================================================
ASYNC_EXECUTOR_CORE_POOL_SIZE=5
ASYNC_EXECUTOR_MAX_POOL_SIZE=10
ASYNC_EXECUTOR_QUEUE_CAPACITY=100

# ============================================================================
# JWT Configuration
# ============================================================================
JWT_ACCESS_TOKEN_EXPIRY_DAYS=7
JWT_ACCESS_TOKEN_MAX_AGE=604800
JWT_ISSUER=medisecure-auth-service
JWT_PRIVATE_KEY=classpath:keys/private_key_pkcs8.pem
JWT_PUBLIC_KEY=classpath:keys/public_key.pem
JWT_REFRESH_TOKEN_EXPIRY_DAYS=30
JWT_REFRESH_TOKEN_MAX_AGE=2592000

# ⚠️ KEYS MUST BE GENERATED - Run: cd auth-service && mkdir -p src/main/resources/keys

# ============================================================================
# OTP & SMS Configuration
# ============================================================================
OTP_EMAIL_LENGTH=32
OTP_EXPIRY=15
SMS_RATE_LIMIT_PER_HOUR=3
SMS_RATE_LIMIT_PER_DAY=7
SMS_OTP_RATE_LIMIT_PER_HOUR=3
SMS_MAX_RETRY_ATTEMPTS=3

# Twilio SMS Service
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# ⚠️ NEVER commit real Twilio credentials!

# ============================================================================
# Microservices Configuration
# ============================================================================

# Config Server
CONFIG_SERVER_HOSTNAME=config-server
CONFIG_SERVER_PORT=8888

# Eureka Server (Service Discovery)
EUREKA_SERVER=http://${EUREKA_SERVER_HOSTNAME}:${EUREKA_SERVER_PORT}/eureka/
EUREKA_SERVER_HOSTNAME=eureka-service
EUREKA_SERVER_IP=127.0.0.1
EUREKA_SERVER_PORT=8761
PREFER_IP_ADDRESS=false

# Gateway Server
GATEWAY_SERVER_URL=http://${GATEWAY_SERVER_HOSTNAME}:${GATEWAY_SERVER_PORT}
GATEWAY_SERVER_PORT=8080
GATEWAY_SERVER_HOSTNAME=gateway-service

# User Service
USER_SERVER_PORT=8081
USER_SERVER_HOSTNAME=user-service
USER_SERVICE_PATH_PREFIX=/api/v1/users/

# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# ✓ Replace all placeholder values with real credentials
# ✓ Generate unique passwords (min 16 chars, mixed case, numbers, symbols)
# ✓ Use different credentials for dev/staging/production
# ✓ Enable COOKIE_SECURE=true in production
# ✓ Update FRONTEND_URL to production domain
# ✓ Configure production email service
# ✓ Rotate credentials regularly
# ✓ Use secrets management (AWS Secrets Manager, HashiCorp Vault) in production
# ============================================================================
